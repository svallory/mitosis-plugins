const v={},f=console.debug,h=new Set,c=new WeakSet;let u,g,d=!1;function p(e){d||(d=!0,f?.("[astro] Initializing prefetch script"),u??=!1,g??="hover",w(),y(),L(),b())}function w(){for(const e of["touchstart","mousedown"])document.addEventListener(e,t=>{a(t.target,"tap")&&s(t.target.href,{ignoreSlowConnection:!0})},{passive:!0})}function y(){let e;document.body.addEventListener("focusin",n=>{a(n.target,"hover")&&t(n)},{passive:!0}),document.body.addEventListener("focusout",o,{passive:!0}),l(()=>{for(const n of document.getElementsByTagName("a"))c.has(n)||a(n,"hover")&&(c.add(n),n.addEventListener("mouseenter",t,{passive:!0}),n.addEventListener("mouseleave",o,{passive:!0}))});function t(n){const r=n.target.href;e&&clearTimeout(e),e=setTimeout(()=>{s(r)},80)}function o(){e&&(clearTimeout(e),e=0)}}function L(){let e;l(()=>{for(const t of document.getElementsByTagName("a"))c.has(t)||a(t,"viewport")&&(c.add(t),e??=S(),e.observe(t))})}function S(){const e=new WeakMap;return new IntersectionObserver((t,o)=>{for(const n of t){const r=n.target,i=e.get(r);n.isIntersecting?(i&&clearTimeout(i),e.set(r,setTimeout(()=>{o.unobserve(r),e.delete(r),s(r.href)},300))):i&&(clearTimeout(i),e.delete(r))}})}function b(){l(()=>{for(const e of document.getElementsByTagName("a"))a(e,"load")&&s(e.href)})}function s(e,t){e=e.replace(/#.*/,"");const o=t?.ignoreSlowConnection??!1;if(E(e,o))if(h.add(e),document.createElement("link").relList?.supports?.("prefetch")&&t?.with!=="fetch"){f?.(`[astro] Prefetching ${e} with <link rel="prefetch">`);const n=document.createElement("link");n.rel="prefetch",n.setAttribute("href",e),document.head.append(n)}else{f?.(`[astro] Prefetching ${e} with fetch`);const n=new Headers;for(const[r,i]of Object.entries(v))n.set(r,i);fetch(e,{priority:"low",headers:n})}}function E(e,t){if(!navigator.onLine||!t&&m())return!1;try{const o=new URL(e,location.href);return location.origin===o.origin&&(location.pathname!==o.pathname||location.search!==o.search)&&!h.has(e)}catch{}return!1}function a(e,t){if(e?.tagName!=="A")return!1;const o=e.dataset.astroPrefetch;return o==="false"?!1:t==="tap"&&(o!=null||u)&&m()?!0:o==null&&u||o===""?t===g:o===t}function m(){if("connection"in navigator){const e=navigator.connection;return e.saveData||/2g/.test(e.effectiveType)}return!1}function l(e){e();let t=!1;document.addEventListener("astro:page-load",()=>{if(!t){t=!0;return}e()})}p();
