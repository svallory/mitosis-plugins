<SYSTEM>This is the full developer documentation for Mitosis Plugins</SYSTEM>

# Plugins for Mitosis

> Build once, compile everywhere. Enhance your Mitosis workflow with powerful plugins that solve real cross-framework challenges.

## Available Plugins

Each plugin solves a specific cross-framework challenge

### [Magic Imports](/plugins/magic-imports/)

[Define virtual imports that automatically resolve to framework-specific implementations. Perfect for hooks, utilities, and shared logic.](/plugins/magic-imports/)

[Learn more ](/plugins/magic-imports/)

### [Index Generator](/plugins/index-generator/)

[Automatically generate index.ts files for clean re-exports. Maintain proper import paths without manual file management.](/plugins/index-generator/)

[Learn more ](/plugins/index-generator/)

### [Story Generator](/plugins/story-generator/)

[beta](/plugins/story-generator/)

[Auto-generate Storybook stories from your Mitosis components. Test your components in every target framework.](/plugins/story-generator/)

[Learn more ](/plugins/story-generator/)

### [Rich Types](/plugins/rich-types/)

[Fix TypeScript inference issues that occur during compilation. Ensure your components have proper types in all frameworks.](/plugins/rich-types/)

[Learn more ](/plugins/rich-types/)

### [Target Files](/plugins/target-files/)

[Handle framework-specific files alongside your Mitosis components. Include CSS, assets, and config per target.](/plugins/target-files/)

[Learn more ](/plugins/target-files/)

### [CSS Modules](/plugins/css-modules/)

[Inject CSS from external module files directly into your components. Keep styles organized and maintainable.](/plugins/css-modules/)

[Learn more ](/plugins/css-modules/)

## Explore the Docs

[Overview ](/mitosis-plugins/guides/overview/)Understand how Mitosis Plugins work together

[Getting Started ](/mitosis-plugins/guides/getting-started/)Step-by-step installation and setup guide

[Plugin Reference ](/mitosis-plugins/plugins/magic-imports/)Detailed API documentation for each plugin

[GitHub ](https://github.com/svallory/mitosis-plugins)View source, report issues, and contribute

# Code of Conduct

> Contributor Covenant Code of Conduct for mitosis-plugins

## Our Pledge

[Section titled ‚ÄúOur Pledge‚Äù](#our-pledge)

We as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation.

We pledge to act and interact in ways that contribute to an open, welcoming, diverse, inclusive, and healthy community.

## Our Standards

[Section titled ‚ÄúOur Standards‚Äù](#our-standards)

Examples of behavior that contributes to a positive environment for our community include:

* Demonstrating empathy and kindness toward other people
* Being respectful of differing opinions, viewpoints, and experiences
* Giving and gracefully accepting constructive feedback
* Accepting responsibility and apologizing to those affected by our mistakes, and learning from the experience
* Focusing on what is best not just for us as individuals, but for the overall community

Examples of unacceptable behavior include:

* The use of sexualized language or imagery, and sexual attention or advances of any kind
* Trolling, insulting or derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others‚Äô private information, such as a physical or email address, without their explicit permission
* Other conduct which could reasonably be considered inappropriate in a professional setting

## Enforcement Responsibilities

[Section titled ‚ÄúEnforcement Responsibilities‚Äù](#enforcement-responsibilities)

Community leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful.

Community leaders have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate.

## Scope

[Section titled ‚ÄúScope‚Äù](#scope)

This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event.

## Enforcement

[Section titled ‚ÄúEnforcement‚Äù](#enforcement)

Instances of abusive, harassing, or otherwise unacceptable behavior may be reported to the community leaders responsible for enforcement at <svallory@me.com>. All complaints will be reviewed and investigated promptly and fairly.

All community leaders are obligated to respect the privacy and security of the reporter of any incident.

## Enforcement Guidelines

[Section titled ‚ÄúEnforcement Guidelines‚Äù](#enforcement-guidelines)

Community leaders will follow these Community Impact Guidelines in determining the consequences for any action they deem in violation of this Code of Conduct:

### 1. Correction

[Section titled ‚Äú1. Correction‚Äù](#1-correction)

**Community Impact**: Use of inappropriate language or other behavior deemed unprofessional or unwelcome in the community.

**Consequence**: A private, written warning from community leaders, providing clarity around the nature of the violation and an explanation of why the behavior was inappropriate. A public apology may be requested.

### 2. Warning

[Section titled ‚Äú2. Warning‚Äù](#2-warning)

**Community Impact**: A violation through a single incident or series of actions.

**Consequence**: A warning with consequences for continued behavior. No interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, for a specified period of time. This includes avoiding interactions in community spaces as well as external channels like social media. Violating these terms may lead to a temporary or permanent ban.

### 3. Temporary Ban

[Section titled ‚Äú3. Temporary Ban‚Äù](#3-temporary-ban)

**Community Impact**: A serious violation of community standards, including sustained inappropriate behavior.

**Consequence**: A temporary ban from any sort of interaction or public communication with the community for a specified period of time. No public or private interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, is allowed during this period. Violating these terms may lead to a permanent ban.

### 4. Permanent Ban

[Section titled ‚Äú4. Permanent Ban‚Äù](#4-permanent-ban)

**Community Impact**: Demonstrating a pattern of violation of community standards, including sustained inappropriate behavior, harassment of an individual, or aggression toward or disparagement of classes of individuals.

**Consequence**: A permanent ban from any sort of public interaction within the community.

## Attribution

[Section titled ‚ÄúAttribution‚Äù](#attribution)

This Code of Conduct is adapted from the [Contributor Covenant](https://www.contributor-covenant.org), version 2.0, available at <https://www.contributor-covenant.org/version/2/0/code_of_conduct.html>.

Community Impact Guidelines were inspired by [Mozilla‚Äôs code of conduct enforcement ladder](https://github.com/mozilla/diversity).

For answers to common questions about this code of conduct, see the FAQ at <https://www.contributor-covenant.org/faq>. Translations are available at <https://www.contributor-covenant.org/translations>.

# Support

> Support the development of mitosis-plugins

If you find this project useful, please consider sponsoring its development. Your support helps maintain and improve mitosis-plugins for the entire community.

You can sponsor the development of mitosis-plugins through GitHub Sponsors.

[![Sponsor svallory on GitHub](https://img.shields.io/badge/Sponsor-svallory-pink?logo=github-sponsors\&style=for-the-badge)](https://github.com/sponsors/svallory)

## Other Ways to Support

[Section titled ‚ÄúOther Ways to Support‚Äù](#other-ways-to-support)

Can‚Äôt sponsor financially? You can still help:

* **Contribute code** - See our [Contributing Guide](/guides/contributing/)
* **Report bugs** - Help us identify and fix issues
* **Spread the word** - Star the repo and share with your network (my Twitter username is [@svallory\_en](https://x.com/svallory_en))

## Thank You!

[Section titled ‚ÄúThank You!‚Äù](#thank-you)

Every contribution, whether financial or otherwise, is deeply appreciated. Thank you for supporting open source software and the Mitosis ecosystem.

***

Questions about sponsorship?\
Feel free to reach out via [GitHub Discussions](https://github.com/svallory/mitosis-plugins/discussions).

# Contributing

> Guidelines for contributing to mitosis-plugins

Thank you for your interest in contributing to mitosis-plugins! This guide provides all the information you need to get started.

## Code of Conduct

[Section titled ‚ÄúCode of Conduct‚Äù](#code-of-conduct)

This project adheres to a code of conduct. By participating, you are expected to uphold this code. Please read our [Code of Conduct](/community/code-of-conduct/) before contributing.

## Getting Started

[Section titled ‚ÄúGetting Started‚Äù](#getting-started)

### Development Setup

[Section titled ‚ÄúDevelopment Setup‚Äù](#development-setup)

1. Fork the repository on GitHub

2. Clone your fork locally:

   ```bash
   git clone https://github.com/your-username/mitosis-plugins.git
   cd mitosis-plugins
   ```

3. Install dependencies:

   ```bash
   bun install
   ```

4. Run tests to ensure everything is working:

   ```bash
   bun test
   ```

### Project Structure

[Section titled ‚ÄúProject Structure‚Äù](#project-structure)

* mitosis-plugins/

  * src/ Plugin source code

    * magic-imports/ Magic Imports plugin

      * ‚Ä¶

    * index-generator/ Index Generator plugin

      * ‚Ä¶

    * story-generator/ Story Generator plugin

      * ‚Ä¶

    * rich-types/ Rich Types plugin

      * ‚Ä¶

    * target-files/ Target Files plugin

      * ‚Ä¶

    * css-modules/ CSS Modules plugin

      * ‚Ä¶

  * templates/ Story templates

    * ‚Ä¶

  * tests/ Test files

    * ‚Ä¶

  * examples/ Example configurations

    * ‚Ä¶

  * README.md Main documentation

## How to Contribute

[Section titled ‚ÄúHow to Contribute‚Äù](#how-to-contribute)

### Reporting Issues

[Section titled ‚ÄúReporting Issues‚Äù](#reporting-issues)

Before creating an issue:

1. Check if the issue already exists in the [issue tracker](https://github.com/svallory/mitosis-plugins/issues)
2. Ensure you‚Äôre using the latest version
3. Provide a minimal reproduction when possible

When creating an issue, please include:

* Clear title and description
* Steps to reproduce
* Expected vs actual behavior
* Environment details (Node.js version, OS, etc.)

### Suggesting Features

[Section titled ‚ÄúSuggesting Features‚Äù](#suggesting-features)

Feature requests are welcome! Please:

1. Check if the feature already exists or is planned
2. Explain the use case and why it would be valuable
3. Consider if it can be implemented as a separate plugin
4. Be open to discussion and alternative solutions

### Submitting Pull Requests

[Section titled ‚ÄúSubmitting Pull Requests‚Äù](#submitting-pull-requests)

1. **Create a branch**:

   ```bash
   git checkout -b feature/your-feature-name
   ```

2. **Make your changes**:

   * Follow the existing code style
   * Write tests for new functionality
   * Update documentation as needed
   * Keep commits atomic and well-described

3. **Test your changes**:

   ```bash
   # Run all tests
   bun test


   # Run linter
   bun run lint


   # Type check
   bun run typecheck
   ```

4. **Commit your changes**:

   ```bash
   git add .
   git commit -m "feat: add support for X"
   ```

   We use [Conventional Commits](https://www.conventionalcommits.org/):

   * `feat:` New feature
   * `fix:` Bug fix
   * `docs:` Documentation changes
   * `test:` Test additions or changes
   * `refactor:` Code refactoring
   * `chore:` Maintenance tasks

5. **Push and create a PR**:

   ```bash
   git push origin feature/your-feature-name
   ```

   Then create a pull request on GitHub with:

   * Clear description of changes
   * Reference to any related issues
   * Screenshots/examples if applicable

### Code Style

[Section titled ‚ÄúCode Style‚Äù](#code-style)

* Use TypeScript for type safety
* Follow existing formatting (we use Prettier)
* Write self-documenting code with clear variable names
* Add JSDoc comments for public APIs
* Keep functions small and focused

### Testing

[Section titled ‚ÄúTesting‚Äù](#testing)

* Write unit tests for new functionality
* Ensure all tests pass before submitting PR
* Add integration tests for plugin interactions
* Test with real Mitosis projects when possible

### Documentation

[Section titled ‚ÄúDocumentation‚Äù](#documentation)

* Update README.md if adding new features
* Update plugin-specific documentation in `src/`
* Add code examples for new configurations
* Keep documentation clear and concise

## Plugin Development

[Section titled ‚ÄúPlugin Development‚Äù](#plugin-development)

### Creating a New Plugin

[Section titled ‚ÄúCreating a New Plugin‚Äù](#creating-a-new-plugin)

1. Create a new directory in `src/`:

   ```bash
   mkdir src/my-plugin
   ```

2. Create the plugin structure:

   * src/my-plugin/

     * index.ts Main plugin export

     * plugin.ts Plugin implementation

     * README.md Plugin documentation

     * tests/ Plugin tests

       * plugin.test.ts

3. Export from main index:

   src/index.ts

   ```typescript
   export { myPlugin } from './my-plugin';
   ```

4. Follow existing plugin patterns for consistency

### Plugin Best Practices

[Section titled ‚ÄúPlugin Best Practices‚Äù](#plugin-best-practices)

* Use the appropriate Mitosis hook (`code.pre`, `json.post`, etc.)
* Provide sensible defaults
* Make configuration optional when possible
* Add debug logging for troubleshooting
* Handle errors gracefully
* Document all configuration options

## Release Process

[Section titled ‚ÄúRelease Process‚Äù](#release-process)

Releases are managed by maintainers:

1. Version bumps follow semantic versioning
2. Changelog is auto-generated from conventional commits
3. GitHub releases are created with release notes
4. Package is published to npm

## Getting Help

[Section titled ‚ÄúGetting Help‚Äù](#getting-help)

* Check existing documentation and examples
* Look through existing issues and discussions
* Ask questions in [GitHub Discussions](https://github.com/svallory/mitosis-plugins/discussions)
* Open an issue if you need clarification

## Recognition

[Section titled ‚ÄúRecognition‚Äù](#recognition)

Contributors are recognized in:

* Release notes for significant contributions
* README.md contributors section (for major contributions)
* Repository insights/graphs

***

Thank you for contributing to mitosis-plugins!

If you‚Äôd like to support the project financially, check out our [Sponsor page](/community/sponsor/).

*This contributing guide is inspired by [Atom‚Äôs Contributing Guide](https://github.com/atom/atom/blob/master/CONTRIBUTING.md).*

# Getting Started

> Quick start guide for setting up mitosis-plugins in your project

## Quick Start

[Section titled ‚ÄúQuick Start‚Äù](#quick-start)

This guide will help you get started with mitosis-plugins in minutes.

### Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

```bash
bun add mitosis-plugins
```

### Basic Configuration

[Section titled ‚ÄúBasic Configuration‚Äù](#basic-configuration)

Create a `mitosis.config.cjs` file in your project root:

```javascript
const {
  magicImportsPlugin,
  indexGeneratorPlugin,
  targetFilesPlugin
} = require('mitosis-plugins');


module.exports = {
  files: 'src/**/*.lite.tsx',
  targets: ['react', 'vue', 'svelte'],
  commonOptions: {
    plugins: [
      magicImportsPlugin({
        imports: {
          'lucide': {
            mapping: {
              react: 'lucide-react',
              vue: 'lucide-vue-next',
              svelte: 'lucide-svelte'
            },
            shim: 'lucide-react'
          }
        }
      }),
      targetFilesPlugin({
        allTargets: ['react', 'vue', 'svelte']
      })
    ]
  },
  options: {
    react: {
      plugins: [indexGeneratorPlugin()]
    },
    vue: {
      plugins: [indexGeneratorPlugin()]
    },
    svelte: {
      plugins: [indexGeneratorPlugin()]
    }
  }
};
```

### Run Mitosis Build

[Section titled ‚ÄúRun Mitosis Build‚Äù](#run-mitosis-build)

```bash
bunx mitosis build
```

This will compile your `.lite.tsx` components to React, Vue, and Svelte with:

* Framework-specific imports (lucide icons)
* Clean import paths via index files
* Target-specific file handling

## Complete Configuration Example

[Section titled ‚ÄúComplete Configuration Example‚Äù](#complete-configuration-example)

Here‚Äôs a comprehensive example showing all available plugins:

```javascript
const {
  magicImportsPlugin,
  indexGeneratorPlugin,
  storyGeneratorPlugin,
  richTypesPlugin,
  targetFilesPlugin,
  cssModulesPlugin
} = require('mitosis-plugins');


module.exports = {
  files: 'src/**/*.lite.tsx',
  targets: ['react', 'vue', 'svelte'],
  commonOptions: {
    // Plugins applied to all targets
    plugins: [
      magicImportsPlugin({
        imports: {
          'lucide': {
            mapping: {
              react: 'lucide-react',
              vue: 'lucide-vue-next',
              svelte: 'lucide-svelte'
            },
            shim: 'lucide-react'
          }
        },
        ambientTypesPath: 'src/ambient.d.ts'
      }),
      targetFilesPlugin({
        allTargets: ['react', 'vue', 'svelte']
      }),
      cssModulesPlugin()
    ]
  },
  options: {
    react: {
      plugins: [
        indexGeneratorPlugin(),
        storyGeneratorPlugin(),
        richTypesPlugin({
          react: { useStateDefaultType: 'string | null' }
        })
      ]
    },
    vue: {
      plugins: [
        indexGeneratorPlugin(),
        storyGeneratorPlugin()
      ]
    },
    svelte: {
      plugins: [
        indexGeneratorPlugin(),
        storyGeneratorPlugin()
      ]
    }
  }
};
```

## API Reference

[Section titled ‚ÄúAPI Reference‚Äù](#api-reference)

All plugins export their configuration types:

```typescript
import type {
  MagicImportsOptions,
  IndexGeneratorOptions,
  StoryGeneratorOptions,
  RichTypesOptions,
  TargetFilesOptions,
  CssModulesPluginOptions
} from 'mitosis-plugins';
```

### Configuration Types

[Section titled ‚ÄúConfiguration Types‚Äù](#configuration-types)

Each plugin accepts its own configuration object. See individual plugin documentation for detailed API references:

* [Magic Imports API ‚Üí](/plugins/magic-imports/#api-reference)
* [Index Generator API ‚Üí](/plugins/index-generator/#configuration-options)
* [Story Generator API ‚Üí](/plugins/story-generator/#configuration)
* [Rich Types API ‚Üí](/plugins/rich-types/#configuration-options)
* [Target Files API ‚Üí](/plugins/target-files/#configuration)
* [CSS Modules API ‚Üí](/plugins/css-modules/#configuration-options)

## Next Steps

[Section titled ‚ÄúNext Steps‚Äù](#next-steps)

* Read the [Overview](/guides/overview/) to understand what each plugin does

* Explore individual plugin guides for advanced features:

  * [Magic Imports](/plugins/magic-imports/) - Framework-specific package mapping
  * [Index Generator](/plugins/index-generator/) - Clean import paths
  * [Story Generator](/plugins/story-generator/) - Auto-generate Storybook stories
  * [Rich Types](/plugins/rich-types/) - Fix TypeScript inference issues
  * [Target Files](/plugins/target-files/) - Framework-specific file handling
  * [CSS Modules](/plugins/css-modules/) - Separate CSS file support

* Learn how to [contribute](/guides/contributing/) to the project

# Mitosis Plugins Overview

> Complete overview of mitosis-plugins with plugin descriptions and use cases

A collection of plugins for [Mitosis](https://mitosis.builder.io/) to enhance cross-framework component development.

## What are Mitosis Plugins?

[Section titled ‚ÄúWhat are Mitosis Plugins?‚Äù](#what-are-mitosis-plugins)

Mitosis Plugins extend the Mitosis compiler to solve common challenges in cross-framework development:

* Framework-specific package mapping
* Clean component exports
* Automated documentation generation
* TypeScript type inference fixes
* Framework-specific code handling
* CSS module integration

## Available Plugins

[Section titled ‚ÄúAvailable Plugins‚Äù](#available-plugins)

| Plugin                                     | Description                                              |
| ------------------------------------------ | -------------------------------------------------------- |
| [`magicImportsPlugin`](#magic-imports)     | Replace virtual imports with framework-specific packages |
| [`indexGeneratorPlugin`](#index-generator) | Generate index.ts files for folder-based imports         |
| [`storyGeneratorPlugin`](#story-generator) | Auto-generate Storybook stories from components          |
| [`richTypesPlugin`](#rich-types)           | Fix TypeScript type inference issues                     |
| [`targetFilesPlugin`](#target-files)       | Copy target-specific files using naming convention       |
| [`cssModulesPlugin`](#css-modules)         | Inject CSS from `.module.css` files into components      |

## Plugin Summaries

[Section titled ‚ÄúPlugin Summaries‚Äù](#plugin-summaries)

### Magic Imports

[Section titled ‚ÄúMagic Imports‚Äù](#magic-imports)

Replace virtual imports with framework-specific packages. Perfect for libraries that have different package names per framework (e.g., `lucide-react` vs `lucide-vue-next`).

**When to use:**

* You need the same functionality from different packages in each framework
* Frameworks use different component names (ReactFlow vs VueFlow)
* You want to maintain a single import statement in source code

**Learn more:** [Magic Imports Plugin ‚Üí](/plugins/magic-imports/)

### Index Generator

[Section titled ‚ÄúIndex Generator‚Äù](#index-generator)

Generates `index.ts` files for each component to support clean imports like `import Button from './components/Button'` instead of `./components/Button/Button`.

**When to use:**

* You want clean, concise import paths
* You‚Äôre organizing components into subdirectories
* You‚Äôre building a component library

**Learn more:** [Index Generator Plugin ‚Üí](/plugins/index-generator/)

### Story Generator

[Section titled ‚ÄúStory Generator‚Äù](#story-generator)

Automatically generates framework-specific Storybook stories from component metadata using customizable templates.

**When to use:**

* You want to document components with interactive examples
* You need framework-specific Storybook stories
* You want to maintain story configuration alongside component code

**Learn more:** [Story Generator Plugin ‚Üí](/plugins/story-generator/)

### Rich Types

[Section titled ‚ÄúRich Types‚Äù](#rich-types)

Adds TypeScript type hints to fix common Mitosis type inference issues, especially with `useState` and dynamic components.

**When to use:**

* Mitosis generates code with TypeScript errors
* Dynamic component references need type casts
* Generated code lacks proper type annotations

**Learn more:** [Rich Types Plugin ‚Üí](/plugins/rich-types/)

### Target Files

[Section titled ‚ÄúTarget Files‚Äù](#target-files)

Enables target-specific files using `*.[target].*` naming convention. Perfect for framework-specific code that can‚Äôt be handled by Mitosis compilation.

**When to use:**

* A library has different package structures between frameworks
* You need framework-specific utility functions
* You want to avoid bundling unused code

**Learn more:** [Target Files Plugin ‚Üí](/plugins/target-files/)

### CSS Modules

[Section titled ‚ÄúCSS Modules‚Äù](#css-modules)

Reads CSS from `.module.css` files and injects into components, enabling better IDE support and cleaner component files.

**When to use:**

* You prefer CSS in separate files rather than inline `useStyle`
* You want better IDE support for CSS editing
* You‚Äôre migrating existing CSS Modules to Mitosis

**Learn more:** [CSS Modules Plugin ‚Üí](/plugins/css-modules/)

## Next Steps

[Section titled ‚ÄúNext Steps‚Äù](#next-steps)

* Start with the [Getting Started Guide](/guides/getting-started/) for step-by-step setup and configuration
* Explore individual plugin documentation for detailed usage and advanced features
* Learn how to [contribute](/guides/contributing/) to the project
* Check out the [GitHub repository](https://github.com/svallory/mitosis-plugins) for source code and examples

## License

[Section titled ‚ÄúLicense‚Äù](#license)

MIT

# CSS Modules Plugin

> Inject CSS from .module.css files into Mitosis components

A Mitosis plugin that reads CSS from `.module.css` files and injects it into the component‚Äôs `json.style`, enabling CSS to be processed by Mitosis‚Äôs built-in style handling.

## Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

```bash
bun add mitosis-plugins
```

## Key Features

[Section titled ‚ÄúKey Features‚Äù](#key-features)

* ‚úÖ **Reads CSS from `.module.css` files** - Finds CSS files alongside components
* ‚úÖ **Injects into `json.style`** - Works like `useStyle` but reads from files
* ‚úÖ **Framework support** - Works with all Mitosis targets (React, Vue, Svelte, Solid)
* ‚úÖ **Respects `stylesType`** - Follows target‚Äôs style configuration
* ‚úÖ **Performance optimized** - Caches CSS content for better performance
* ‚úÖ **Debug mode** - Detailed logging for development

## How It Works

[Section titled ‚ÄúHow It Works‚Äù](#how-it-works)

1. **Find CSS Module**: Looks for a `.module.css` file alongside each Mitosis component (e.g., `Button.module.css` next to `Button.lite.tsx`)
2. **Read CSS**: Reads the CSS content from the file
3. **Inject into json.style**: Injects the CSS into the component‚Äôs `json.style` property (exactly like `useStyle` does)
4. **Mitosis handles output**: Mitosis‚Äôs built-in style handling generates framework-specific output based on `stylesType` configuration

## Usage

[Section titled ‚ÄúUsage‚Äù](#usage)

Add the plugin to your `mitosis.config.cjs`:

```javascript
const { cssModulesPlugin } = require('mitosis-plugins');


module.exports = {
  targets: ['react', 'vue', 'svelte'],
  options: {
    react: {
      stylesType: 'style-tag', // Mitosis will generate <style> tags
      plugins: [
        cssModulesPlugin()
      ]
    },
    vue: {
      plugins: [
        cssModulesPlugin()
      ]
    },
    svelte: {
      plugins: [
        cssModulesPlugin()
      ]
    }
  }
};
```

## Configuration Options

[Section titled ‚ÄúConfiguration Options‚Äù](#configuration-options)

| Option          | Type       | Default         | Description                    |
| --------------- | ---------- | --------------- | ------------------------------ |
| `enabled`       | `boolean`  | `true`          | Enable/disable the plugin      |
| `targets`       | `string[]` | `undefined`     | Only apply to specific targets |
| `debug`         | `boolean`  | `false`         | Enable debug logging           |
| `fileExtension` | `string`   | `'.module.css'` | File extension to look for     |

## Example

[Section titled ‚ÄúExample‚Äù](#example)

### File Structure

[Section titled ‚ÄúFile Structure‚Äù](#file-structure)

```plaintext
src/components/Button/
  Button.lite.tsx      # Mitosis component
  Button.module.css    # CSS module (read by plugin)
```

### Input: Button.lite.tsx

[Section titled ‚ÄúInput: Button.lite.tsx‚Äù](#input-buttonlitetsx)

```tsx
export default function Button(props: { label: string }) {
  return <button className="button">{props.label}</button>;
}
```

### Input: Button.module.css

[Section titled ‚ÄúInput: Button.module.css‚Äù](#input-buttonmodulecss)

```css
.button {
  background: blue;
  color: white;
  padding: 10px 20px;
  border-radius: 4px;
}


.button:hover {
  background: darkblue;
}
```

### Output: React (with stylesType: ‚Äòstyle-tag‚Äô)

[Section titled ‚ÄúOutput: React (with stylesType: ‚Äòstyle-tag‚Äô)‚Äù](#output-react-with-stylestype-style-tag)

```jsx
export default function Button(props) {
  return (
    <>
      <button className="button">{props.label}</button>
      <style>{`
        .button {
          background: blue;
          color: white;
          padding: 10px 20px;
          border-radius: 4px;
        }


        .button:hover {
          background: darkblue;
        }
      `}</style>
    </>
  );
}
```

### Output: Svelte

[Section titled ‚ÄúOutput: Svelte‚Äù](#output-svelte)

```svelte
<script lang="ts">
  export let label: string;
</script>


<button class="button">{label}</button>


<style>
  .button {
    background: blue;
    color: white;
    padding: 10px 20px;
    border-radius: 4px;
  }


  .button:hover {
    background: darkblue;
  }
</style>
```

### Output: Vue

[Section titled ‚ÄúOutput: Vue‚Äù](#output-vue)

```vue
<template>
  <button class="button">{{ label }}</button>
</template>


<script setup lang="ts">
const props = defineProps<{ label: string }>();
</script>


<style scoped>
.button {
  background: blue;
  color: white;
  padding: 10px 20px;
  border-radius: 4px;
}


.button:hover {
  background: darkblue;
}
</style>
```

## Debug Mode

[Section titled ‚ÄúDebug Mode‚Äù](#debug-mode)

Enable debug mode to see detailed logs:

```bash
DEBUG_MITOSIS_CSS_MODULES=true bun run build
```

Debug output includes:

* Component paths being processed
* CSS module file paths being searched
* Bytes read from CSS files
* Injection confirmations

## Framework Compatibility

[Section titled ‚ÄúFramework Compatibility‚Äù](#framework-compatibility)

The plugin works with all Mitosis targets. The output format depends on the target‚Äôs `stylesType` configuration:

* **React**: `<style>` tags or CSS-in-JS based on `stylesType`
* **Vue**: `<style scoped>` blocks
* **Svelte**: `<style>` blocks (auto-scoped by Svelte)
* **Solid**: `<style>` tags based on `stylesType`

## Combining with useStyle

[Section titled ‚ÄúCombining with useStyle‚Äù](#combining-with-usestyle)

The plugin appends CSS to any existing `json.style` content, so it works alongside `useStyle`:

```tsx
import { useStyle } from '@builder.io/mitosis';


export default function Button(props) {
  // Additional styles via useStyle
  useStyle(`
    .button-extra {
      margin: 10px;
    }
  `);


  // Button.module.css styles will be appended
  return <button className="button button-extra">{props.label}</button>;
}
```

## Notes

[Section titled ‚ÄúNotes‚Äù](#notes)

* The plugin runs in the `json.pre` hook, before Mitosis processes styles
* CSS is read once and cached for better performance across multiple targets
* If no `.module.css` file exists, the component is passed through unchanged
* The plugin does NOT scope class names - it simply injects CSS for Mitosis to handle

## Related Plugins

[Section titled ‚ÄúRelated Plugins‚Äù](#related-plugins)

* **[Index Generator](/plugins/index-generator/)** - Generates index files for cleaner imports
* **[Story Generator](/plugins/story-generator/)** - Automatically generates Storybook stories for your components
* **[Rich Types](/plugins/rich-types/)** - Adds TypeScript type hints to generated code
* **[Target Files](/plugins/target-files/)** - Enables target-specific files using naming conventions

## License

[Section titled ‚ÄúLicense‚Äù](#license)

MIT

# Index Generator Plugin

> Generate index.ts files for clean imports in Mitosis projects

Generates `index.ts` files for each component to support folder-based import structures.

## Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

```bash
bun add mitosis-plugins
```

## Key Features

[Section titled ‚ÄúKey Features‚Äù](#key-features)

* **Automatic index generation** - Creates `index.ts` files that re-export default components
* **Clean imports** - Enables `import Button from './components/Button'` instead of `import Button from './components/Button/Button'`
* **Framework aware** - Handles different file extensions for React, Vue, and Svelte
* **Customizable paths** - Configure component output directories
* **Subcomponent support** - Automatically skips components in `subcomponents/` directories

## Usage

[Section titled ‚ÄúUsage‚Äù](#usage)

### Basic Setup

[Section titled ‚ÄúBasic Setup‚Äù](#basic-setup)

```javascript
const { indexGeneratorPlugin } = require('mitosis-plugins');


module.exports = {
  targets: ['react', 'vue', 'svelte'],
  options: {
    react: {
      plugins: [indexGeneratorPlugin()]
    },
    vue: {
      plugins: [indexGeneratorPlugin()]
    },
    svelte: {
      plugins: [indexGeneratorPlugin()]
    }
  }
};
```

### Custom Component Paths

[Section titled ‚ÄúCustom Component Paths‚Äù](#custom-component-paths)

Organize components into subdirectories based on naming conventions:

```javascript
indexGeneratorPlugin({
  getComponentBasePath: (name) => {
    if (name.startsWith('Form')) return 'components/forms';
    if (name.startsWith('Layout')) return 'components/layouts';
    if (name.startsWith('Icon')) return 'components/icons';
    return 'components';
  }
})
```

### Custom Output Directory

[Section titled ‚ÄúCustom Output Directory‚Äù](#custom-output-directory)

Override the default output structure:

```javascript
indexGeneratorPlugin({
  outputDir: 'lib/components'
})
```

### Full Control

[Section titled ‚ÄúFull Control‚Äù](#full-control)

For complete customization:

```javascript
const path = require('path');


indexGeneratorPlugin({
  getIndexOutputPath: (componentName, framework, projectRoot) => {
    return path.join(projectRoot, 'dist', framework, componentName, 'index.ts');
  },
  generateIndexContent: (componentName, framework) => {
    const ext = framework === 'vue' ? '.vue' : framework === 'svelte' ? '.svelte' : '';
    return `export { default } from './${componentName}${ext}';
export * from './${componentName}${ext}';
`;
  }
})
```

## Configuration Options

[Section titled ‚ÄúConfiguration Options‚Äù](#configuration-options)

```typescript
interface IndexGeneratorOptions {
  /**
   * Base output directory for generated files.
   * Defaults to `packages/{framework}/src` relative to the project root.
   */
  outputDir?: string;


  /**
   * Function to determine the component's base path within the output directory.
   */
  getComponentBasePath?: (componentName: string) => string;


  /**
   * Function to determine the full output path for the index file.
   * Overrides default path calculation.
   */
  getIndexOutputPath?: (componentName: string, framework: string, projectRoot: string) => string;


  /**
   * Function to generate custom index file content.
   */
  generateIndexContent?: (componentName: string, framework: string) => string;


  /**
   * Enable debug logging.
   * @default false
   */
  debug?: boolean;
}
```

## Output

[Section titled ‚ÄúOutput‚Äù](#output)

For a component named `Button`, the plugin generates:

**React** (`packages/react/src/components/Button/index.ts`):

```typescript
export { default } from './Button';
```

**Vue** (`packages/vue/src/components/Button/index.ts`):

```typescript
export { default } from './Button.vue';
```

**Svelte** (`packages/svelte/src/components/Button/index.ts`):

```typescript
export { default } from './Button.svelte';
```

## Related Plugins

[Section titled ‚ÄúRelated Plugins‚Äù](#related-plugins)

* **[Story Generator](/plugins/story-generator/)** - Automatically generates Storybook stories for your components
* **[Rich Types](/plugins/rich-types/)** - Adds TypeScript type hints to generated code
* **[Target Files](/plugins/target-files/)** - Enables target-specific files using naming conventions
* **[CSS Modules](/plugins/css-modules/)** - Injects CSS modules into component styles

## License

[Section titled ‚ÄúLicense‚Äù](#license)

MIT

# Magic Imports Plugin

> Enable virtual imports with framework-specific mappings for Mitosis

A Mitosis plugin that enables **virtual imports** with framework-specific mappings, symbol renaming, and automatic import splitting.

## Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

```bash
bun add mitosis-plugins
```

## Features

[Section titled ‚ÄúFeatures‚Äù](#features)

* **Framework-specific imports** - Map virtual imports to different packages per target framework
* **Symbol renaming** - Rename imports to match framework conventions (e.g., `Flow` ‚Üí `ReactFlow as Flow`)
* **Auto-splitting** - Automatically split imports across multiple packages
* **Type safety** - Generates ambient TypeScript declarations for IDE support
* **Catch-all routing** - Use `'*'` to handle unmapped symbols

## Quick Start

[Section titled ‚ÄúQuick Start‚Äù](#quick-start)

```javascript
const { magicImportsPlugin } = require('mitosis-plugins');


module.exports = {
  plugins: [
    magicImportsPlugin({
      imports: {
        'lucide': {
          mapping: {
            react: 'lucide-react',
            svelte: 'lucide-svelte',
            vue: 'lucide-vue-next'
          },
          shim: 'lucide-react'  // Type declarations
        }
      },
      ambientTypesPath: 'src/ambient.d.ts'
    })
  ]
};
```

## Usage

[Section titled ‚ÄúUsage‚Äù](#usage)

**Source code:**

```typescript
import { Home, Settings } from 'virtual:lucide';
```

**Generated output:**

* React: `import { Home, Settings } from 'lucide-react';`
* Svelte: `import { Home, Settings } from 'lucide-svelte';`
* Vue: `import { Home, Settings } from 'lucide-vue-next';`

## Configuration

[Section titled ‚ÄúConfiguration‚Äù](#configuration)

### Basic Configuration

[Section titled ‚ÄúBasic Configuration‚Äù](#basic-configuration)

```javascript
magicImportsPlugin({
  imports: {
    'virtual-package-name': {
      mapping: {
        react: 'react-package',
        vue: 'vue-package',
        svelte: 'svelte-package'
      },
      shim: 'react-package'  // For TypeScript
    }
  }
})
```

### Symbol Renaming

[Section titled ‚ÄúSymbol Renaming‚Äù](#symbol-renaming)

```javascript
magicImportsPlugin({
  imports: {
    'flow': {
      mapping: {
        react: {
          symbols: {
            'Flow': { from: 'reactflow', symbol: 'ReactFlow' }
          }
        },
        vue: {
          symbols: {
            'Flow': { from: '@vue-flow/core', symbol: 'VueFlow' }
          }
        }
      }
    }
  }
})
```

### Auto-Splitting

[Section titled ‚ÄúAuto-Splitting‚Äù](#auto-splitting)

```javascript
magicImportsPlugin({
  imports: {
    'flow': {
      mapping: {
        vue: {
          symbols: {
            'Flow': { from: '@vue-flow/core', symbol: 'VueFlow' },
            'Background': '@vue-flow/background',
            'Controls': '@vue-flow/controls'
          }
        }
      }
    }
  }
})
```

## API Reference

[Section titled ‚ÄúAPI Reference‚Äù](#api-reference)

### Plugin Options

[Section titled ‚ÄúPlugin Options‚Äù](#plugin-options)

```typescript
interface MagicImportsOptions {
  imports: Record<string, ImportConfig>;
  ambientTypesPath?: string;
}


interface ImportConfig {
  mapping: Record<string, MappingValue>;
  shim?: string | ShimValue;
}
```

### Related Plugins

[Section titled ‚ÄúRelated Plugins‚Äù](#related-plugins)

* **[Target Files](/plugins/target-files/)** - Use together when you need framework-specific files for your virtual imports
* **[Rich Types](/plugins/rich-types/)** - Combine for better TypeScript support with complex import mappings

## License

[Section titled ‚ÄúLicense‚Äù](#license)

MIT

# Rich Types Plugin

> Fix TypeScript type inference issues in Mitosis generated code

Add TypeScript type hints to generated code that Mitosis doesn‚Äôt infer automatically.

## Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

```bash
bun add mitosis-plugins
```

## Key Features

[Section titled ‚ÄúKey Features‚Äù](#key-features)

* **Fixes useState types** - Adds proper TypeScript types to useState hooks with null initializers
* **Component type hints** - Casts dynamic component references to proper types
* **Custom patterns** - Apply regex-based transformations for any framework
* **Framework-specific** - Target fixes to specific frameworks (React, Vue, Svelte)
* **Debug mode** - See exactly what transformations are applied

## Usage

[Section titled ‚ÄúUsage‚Äù](#usage)

### Basic Setup (React)

[Section titled ‚ÄúBasic Setup (React)‚Äù](#basic-setup-react)

```javascript
const { richTypesPlugin } = require('mitosis-plugins');


module.exports = {
  options: {
    react: {
      plugins: [
        richTypesPlugin({
          react: {
            // Default type for useState with null initializer
            useStateDefaultType: 'string | null'
          }
        })
      ]
    }
  }
};
```

### Specific Type Mappings

[Section titled ‚ÄúSpecific Type Mappings‚Äù](#specific-type-mappings)

Map specific state variable names to their types:

```javascript
richTypesPlugin({
  react: {
    useStateTypes: {
      'selectedItem': 'Item | null',
      'currentUser': 'User | null',
      'activeTab': 'TabId',
      'formData': 'FormState | null'
    }
  }
})
```

### Dynamic Component Types

[Section titled ‚ÄúDynamic Component Types‚Äù](#dynamic-component-types)

Fix type errors for dynamic component references:

```javascript
richTypesPlugin({
  react: {
    componentTypeHint: 'React.ComponentType<any>',
    componentRefPattern: /Ref$/  // Matches variables ending in "Ref"
  }
})
```

This transforms:

```typescript
const IconRef = getIcon();  // Error: Type unknown
```

To:

```typescript
const IconRef = getIcon() as React.ComponentType<any>;
```

### Custom Patterns

[Section titled ‚ÄúCustom Patterns‚Äù](#custom-patterns)

For any framework, apply regex-based transformations:

```javascript
richTypesPlugin({
  patterns: [
    {
      pattern: /const (\w+) = ref\(null\)/g,
      replacement: 'const $1 = ref<string | null>(null)',
      description: 'Add type to Vue ref with null'
    },
    {
      pattern: /let (\w+): any = \$state\(null\)/g,
      replacement: 'let $1: string | null = $state(null)',
      description: 'Add type to Svelte 5 state'
    }
  ]
})
```

## Configuration Options

[Section titled ‚ÄúConfiguration Options‚Äù](#configuration-options)

```typescript
interface RichTypesOptions {
  /**
   * Enable/disable the plugin.
   * @default true
   */
  enabled?: boolean;


  /**
   * Only apply to specific targets.
   * @default undefined (all targets)
   */
  targets?: string[];


  /**
   * Enable debug logging.
   * @default false
   */
  debug?: boolean;


  /**
   * Custom type fix patterns.
   */
  patterns?: TypeFixPattern[];


  /**
   * React-specific options.
   */
  react?: {
    /**
     * Type hint for dynamic components.
     * @default "React.ComponentType<any>"
     */
    componentTypeHint?: string;


    /**
     * Enable useState type inference fix.
     * @default true
     */
    useStateTypeFix?: boolean;


    /**
     * Default type for useState with null.
     * @default "string | null"
     */
    useStateDefaultType?: string;


    /**
     * Map variable names to types.
     */
    useStateTypes?: Record<string, string>;


    /**
     * Enable component ref type cast fix.
     * @default true
     */
    componentRefTypeFix?: boolean;


    /**
     * Pattern to match component ref names.
     * @default /Ref$/
     */
    componentRefPattern?: RegExp;
  };
}


interface TypeFixPattern {
  /**
   * Regex pattern to match.
   */
  pattern: RegExp;


  /**
   * Replacement string or function.
   */
  replacement: string | ((...args: string[]) => string);


  /**
   * Description for debugging.
   */
  description?: string;
}
```

## Built-in Fixes (React)

[Section titled ‚ÄúBuilt-in Fixes (React)‚Äù](#built-in-fixes-react)

### 1. useState with null initializer

[Section titled ‚Äú1. useState with null initializer‚Äù](#1-usestate-with-null-initializer)

**Before:**

```typescript
const [value, setValue] = useState(() => null);
```

**After:**

```typescript
const [value, setValue] = useState<string | null>(() => null);
```

### 2. Dynamic component refs

[Section titled ‚Äú2. Dynamic component refs‚Äù](#2-dynamic-component-refs)

**Before:**

```typescript
const IconRef = getIcon();
```

**After:**

```typescript
const IconRef = getIcon() as React.ComponentType<any>;
```

## Debugging

[Section titled ‚ÄúDebugging‚Äù](#debugging)

Enable debug mode to see what transformations are applied:

```javascript
richTypesPlugin({
  debug: true,
  react: {
    useStateTypes: { 'selectedItem': 'Item | null' }
  }
})
```

Output:

```plaintext
[RichTypes] Applied 2 type fix(es) to MyComponent (react)
```

## Best Practices

[Section titled ‚ÄúBest Practices‚Äù](#best-practices)

1. **Be specific with type mappings** - Use `useStateTypes` for known variable names rather than relying on the default type.

2. **Document your patterns** - Add descriptions to custom patterns for maintainability.

3. **Test generated code** - Run `tsc --noEmit` on generated packages to verify types are correct.

4. **Keep patterns simple** - Complex regex patterns are hard to maintain. Prefer multiple simple patterns.

## Related Plugins

[Section titled ‚ÄúRelated Plugins‚Äù](#related-plugins)

* **[Index Generator](/plugins/index-generator/)** - Generates index files for cleaner imports
* **[Story Generator](/plugins/story-generator/)** - Automatically generates Storybook stories for your components
* **[Target Files](/plugins/target-files/)** - Enables target-specific files using naming conventions
* **[CSS Modules](/plugins/css-modules/)** - Injects CSS modules into component styles

## License

[Section titled ‚ÄúLicense‚Äù](#license)

MIT

# Story Generator Plugin

> Auto-generate Storybook stories from Mitosis components

Automatically generates framework-specific Storybook stories from Mitosis components using customizable Handlebars templates.

## Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

```bash
bun add mitosis-plugins
```

The plugin requires Handlebars as a peer dependency:

```bash
bun add handlebars
```

## Key Features

[Section titled ‚ÄúKey Features‚Äù](#key-features)

* ‚ú® **Automatic story generation** - Creates Storybook stories during Mitosis compilation
* üé® **Template-based** - Uses Handlebars templates for full customization
* üîß **Framework support** - Built-in templates for React, Vue, and Svelte
* üéØ **Custom templates** - Override default templates or add new frameworks
* üì¶ **Zero config** - Works out of the box with sensible defaults

## Usage

[Section titled ‚ÄúUsage‚Äù](#usage)

### Basic Setup

[Section titled ‚ÄúBasic Setup‚Äù](#basic-setup)

Add the plugin to your `mitosis.config.cjs`:

```js
const { storyGeneratorPlugin } = require('mitosis-plugins');


module.exports = {
  targets: ['react', 'vue', 'svelte'],
  options: {
    react: {
      plugins: [storyGeneratorPlugin()]
    },
    vue: {
      plugins: [storyGeneratorPlugin()]
    },
    svelte: {
      plugins: [storyGeneratorPlugin()]
    }
  }
};
```

### Component Metadata

[Section titled ‚ÄúComponent Metadata‚Äù](#component-metadata)

Add Storybook metadata to your Mitosis components:

```tsx
import { useMetadata } from '@builder.io/mitosis';


useMetadata({
  storybook: {
    enabled: true,
    title: 'Components/MyComponent',
    defaultStory: {
      args: {
        title: 'Hello World',
        variant: 'primary',
      },
    },
    stories: [
      {
        name: 'Secondary',
        description: 'Component with secondary variant',
        args: {
          title: 'Secondary Example',
          variant: 'secondary',
        },
      },
    ],
    argTypes: {
      variant: {
        control: 'select',
        options: ['primary', 'secondary'],
      },
    },
    parameters: {
      layout: 'centered',
    },
    tags: ['autodocs'],
  },
});
```

### Custom Component Paths

[Section titled ‚ÄúCustom Component Paths‚Äù](#custom-component-paths)

Configure custom component path resolution:

```js
storyGeneratorPlugin({
  getComponentPath: (name, componentJson) => {
    if (name.startsWith('Form')) return 'components/forms';
    if (name.startsWith('Layout')) return 'components/layouts';
    return 'components';
  }
})
```

### Custom Output Paths

[Section titled ‚ÄúCustom Output Paths‚Äù](#custom-output-paths)

Override where story files are written:

```js
const path = require('path');


storyGeneratorPlugin({
  getStoryOutputPath: (name, framework, projectRoot) => {
    return path.join(projectRoot, 'src', 'stories', `${name}.stories.tsx`);
  }
})
```

### Custom Templates

[Section titled ‚ÄúCustom Templates‚Äù](#custom-templates)

Override default templates or add support for new frameworks:

```js
storyGeneratorPlugin({
  storyTemplates: {
    react: './custom-templates/react.hbs',
    angular: './custom-templates/angular.hbs',
  },
})
```

## Template Variables

[Section titled ‚ÄúTemplate Variables‚Äù](#template-variables)

Your custom Handlebars templates have access to these variables:

| Variable        | Type             | Description                           |
| --------------- | ---------------- | ------------------------------------- |
| `componentName` | `string`         | Name of the component                 |
| `componentPath` | `string`         | Relative path to component            |
| `title`         | `string`         | Storybook story title                 |
| `defaultArgs`   | `string`         | JSON string of default args           |
| `stories`       | `Array<Story>`   | Additional story configurations       |
| `argTypes`      | `object \| null` | Storybook argTypes configuration      |
| `parameters`    | `object`         | Storybook parameters                  |
| `tags`          | `string[]`       | Storybook tags                        |
| `imports`       | `string[]`       | Import statements for external values |

### Story Object

[Section titled ‚ÄúStory Object‚Äù](#story-object)

Each story in the `stories` array has:

| Property      | Type             | Description               |
| ------------- | ---------------- | ------------------------- |
| `name`        | `string`         | Story name (export name)  |
| `args`        | `string`         | JSON string of story args |
| `description` | `string \| null` | Story description (JSDoc) |
| `parameters`  | `object \| null` | Story-specific parameters |

## Helpers

[Section titled ‚ÄúHelpers‚Äù](#helpers)

### `json` Helper

[Section titled ‚Äújson Helper‚Äù](#json-helper)

The `json` helper formats objects as JSON:

```handlebars
parameters: {{{json parameters}}},
```

## Built-in Templates

[Section titled ‚ÄúBuilt-in Templates‚Äù](#built-in-templates)

The plugin includes templates for:

* **React** (`templates/react.hbs`) - TypeScript with `satisfies Meta<typeof Component>`
* **Vue** (`templates/vue.hbs`) - Vue 3 with `satisfies Meta<typeof Component>`
* **Svelte** (`templates/svelte.hbs`) - Svelte with `@ts-nocheck` for .svelte imports

## Configuration

[Section titled ‚ÄúConfiguration‚Äù](#configuration)

The plugin accepts `StoryGeneratorOptions` for customizing paths and templates. See examples in the ‚ÄúCustom Component Paths‚Äù, ‚ÄúCustom Output Paths‚Äù, and ‚ÄúCustom Templates‚Äù sections above.

## Metadata Reference

[Section titled ‚ÄúMetadata Reference‚Äù](#metadata-reference)

### `StoryMetadata` Interface

[Section titled ‚ÄúStoryMetadata Interface‚Äù](#storymetadata-interface)

```typescript
interface StoryMetadata {
  /** Enable/disable story generation (default: true) */
  enabled?: boolean;


  /** Storybook title (default: "Components/{ComponentName}") */
  title?: string;


  /** Default story configuration */
  defaultStory?: {
    args?: Record<string, any>;
  };


  /** Additional named stories */
  stories?: Array<{
    name: string;
    args?: Record<string, any>;
    description?: string;
    parameters?: any;
  }>;


  /** Storybook argTypes */
  argTypes?: Record<string, any>;


  /** Storybook parameters */
  parameters?: any;


  /** Storybook tags (default: ["autodocs"]) */
  tags?: string[];
}
```

## Advanced Usage

[Section titled ‚ÄúAdvanced Usage‚Äù](#advanced-usage)

### Importing External Args

[Section titled ‚ÄúImporting External Args‚Äù](#importing-external-args)

Reference external argument definitions:

```tsx
useMetadata({
  storybook: {
    defaultStory: {
      args: {
        import: '../../shared/story-data/args',
        value: 'myComponentArgs.default',
      },
    },
  },
});
```

This generates:

```typescript
import { myComponentArgs } from '../../shared/story-data/args';


export const Default: Story = {
  args: myComponentArgs.default,
};
```

### Disabling Story Generation

[Section titled ‚ÄúDisabling Story Generation‚Äù](#disabling-story-generation)

Skip story generation for specific components:

```tsx
useMetadata({
  storybook: {
    enabled: false,
  },
});
```

## Example Template

[Section titled ‚ÄúExample Template‚Äù](#example-template)

Here‚Äôs a minimal custom template:

```handlebars
import type { Meta, StoryObj } from '@storybook/react';
import {{componentName}} from '../src/{{componentPath}}/{{componentName}}';


const meta: Meta<typeof {{componentName}}> = {
  title: '{{title}}',
  component: {{componentName}},
};


export default meta;
type Story = StoryObj<typeof meta>;


export const Default: Story = {
  args: {{{defaultArgs}}},
};
```

## Related Plugins

[Section titled ‚ÄúRelated Plugins‚Äù](#related-plugins)

* **[Index Generator](/plugins/index-generator/)** - Generates index files for cleaner imports
* **[Rich Types](/plugins/rich-types/)** - Adds TypeScript type hints to generated code
* **[Target Files](/plugins/target-files/)** - Enables target-specific files using naming conventions
* **[CSS Modules](/plugins/css-modules/)** - Injects CSS modules into component styles

## License

[Section titled ‚ÄúLicense‚Äù](#license)

MIT

# Target Files Plugin

> Handle target-specific files using naming conventions

A Mitosis plugin that enables target-specific files using a simple naming convention: `*.[target].*`.

## Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

```bash
bun add mitosis-plugins
```

## Key Features

[Section titled ‚ÄúKey Features‚Äù](#key-features)

* **Target-specific files** - Create files that only exist in specific framework targets
* **Simple naming convention** - Use `*.[target].*` pattern (e.g., `file.react.ts`, `file.vue.ts`)
* **Folder-level scoping** - Scope entire folders with `(target)` syntax
* **No cleanup needed** - Works during Mitosis build, no postbuild scripts required
* **Framework flexible** - Works with any Mitosis target framework

## Problem

[Section titled ‚ÄúProblem‚Äù](#problem)

When building cross-framework components with Mitosis, you sometimes need target-specific code that can‚Äôt be handled by Mitosis‚Äôs standard compilation. For example:

* **Vue Flow** splits components across multiple packages (`@vue-flow/core`, `@vue-flow/background`, `@vue-flow/controls`)
* **React Flow** provides everything from a single package (`reactflow`)
* **Svelte Flow** uses `@xyflow/svelte`

You need a way to provide a shim file for Vue without polluting React and Svelte packages with unused code.

## Solution

[Section titled ‚ÄúSolution‚Äù](#solution)

This plugin allows you to create target-specific files using the pattern `*.[target].*`:

```plaintext
src/adapters/
  flow-shim.vue.ts     ‚Üí Only kept in packages/vue/
  utils.react.ts       ‚Üí Only kept in packages/react/
  helpers.svelte.ts    ‚Üí Only kept in packages/svelte/
  common.ts            ‚Üí Kept in all targets (normal behavior)
```

The plugin:

1. Uses Mitosis‚Äôs `build.post` hook with the `files.nonComponentFiles` list
2. Renames files matching the current target (strips `.[target]`)
3. Deletes files matching other targets
4. **No postbuild cleanup script needed!**

## Folder-Level Target Scoping

[Section titled ‚ÄúFolder-Level Target Scoping‚Äù](#folder-level-target-scoping)

In addition to file-level targeting, you can scope entire folders using the `(target)` syntax (inspired by Next.js/Nuxt/SvelteKit route groups):

```plaintext
src/
  adapters/
    (vue)/              ‚Üí All contents only in packages/vue/
      flow-shim.ts
      composables.ts
    (react)/            ‚Üí All contents only in packages/react/
      hooks.ts
    common.ts           ‚Üí Kept in all targets
```

**How it works:**

During the build process:

* For matching target (e.g., building Vue): `(vue)/` folder is unwrapped, files moved up one level
* For non-matching targets: `(vue)/` folder and all contents are deleted
* The `(target)` wrapper is removed from the final path

**Output for Vue target:**

```plaintext
packages/vue/src/adapters/
  flow-shim.ts        ‚Üê Unwrapped from (vue)/
  composables.ts      ‚Üê Unwrapped from (vue)/
  common.ts           ‚Üê Regular file, kept
  # (react)/ folder deleted
```

**Output for React target:**

```plaintext
packages/react/src/adapters/
  hooks.ts            ‚Üê Unwrapped from (react)/
  common.ts           ‚Üê Regular file, kept
  # (vue)/ folder deleted
```

### When to Use Each Approach

[Section titled ‚ÄúWhen to Use Each Approach‚Äù](#when-to-use-each-approach)

**File-level (`file.target.ext`)**: Best for single target-specific files

```plaintext
src/adapters/
  flow-shim.vue.ts    ‚Üê Single Vue-specific file
```

**Folder-level (`(target)/`)**: Best when you have multiple related target-specific files

```plaintext
src/adapters/
  (vue)/              ‚Üê Multiple Vue-specific files
    flow-shim.ts
    composables.ts
    vue-utils.ts
```

### Precedence Rules

[Section titled ‚ÄúPrecedence Rules‚Äù](#precedence-rules)

If a file is inside a `(target)` folder AND has a `.target.` suffix, the **file suffix takes precedence**:

```plaintext
src/adapters/
  (vue)/
    helper.react.ts   ‚Üê Only kept in React (file suffix wins)
    utils.ts          ‚Üê Only kept in Vue (folder scoping)
```

This allows you to create exceptions within target-scoped folders.

## Usage

[Section titled ‚ÄúUsage‚Äù](#usage)

Add `targetFilesPlugin()` to your `mitosis.config.js`:

```javascript
const { targetFilesPlugin } = require('mitosis-plugins');


module.exports = {
  files: 'src/**',
  targets: ['react', 'vue', 'svelte'],
  commonOptions: {
    plugins: [
      targetFilesPlugin({
        allTargets: ['react', 'vue', 'svelte']
      })
    ]
  }
};
```

Create files with the pattern `*.[target].*`:

src/adapters/flow-shim.vue.ts

```typescript
export { VueFlow as Flow, Panel } from '@vue-flow/core';
export { Background } from '@vue-flow/background';
export { Controls } from '@vue-flow/controls';
```

Build your project:

```bash
npm run build
```

Output:

```plaintext
packages/
  react/src/adapters/
    (flow-shim.vue.ts deleted)
  vue/src/adapters/
    flow-shim.ts         ‚Üê Renamed from flow-shim.vue.ts
  svelte/src/adapters/
    (flow-shim.vue.ts deleted)
```

## Configuration

[Section titled ‚ÄúConfiguration‚Äù](#configuration)

```typescript
interface TargetFilesOptions {
  /**
   * List of all target names in your Mitosis config.
   * Required for cleanup of files belonging to other targets.
   */
  allTargets: string[];


  /**
   * Enable debug logging.
   * @default false
   */
  debug?: boolean;
}
```

### Debug Mode

[Section titled ‚ÄúDebug Mode‚Äù](#debug-mode)

Enable debug logging to see what the plugin is doing:

```javascript
targetFilesPlugin({
  allTargets: ['react', 'vue', 'svelte'],
  debug: true
})
```

Output:

```plaintext
[TargetFiles] Renamed: flow-shim.vue.ts ‚Üí flow-shim.ts
[TargetFiles] Deleted: flow-shim.vue.ts
[TargetFiles] Deleted: flow-shim.vue.ts
```

## Example: Vue Flow Shim

[Section titled ‚ÄúExample: Vue Flow Shim‚Äù](#example-vue-flow-shim)

**Problem:** Vue Flow splits components across packages while React Flow doesn‚Äôt.

**Solution:** Create a Vue-specific shim:

src/adapters/flow-shim.vue.ts

```typescript
/**
 * Vue Flow Unified Shim
 *
 * Vue Flow splits components across multiple packages, unlike React Flow.
 * This shim re-exports everything from the correct packages.
 */


// Core components
export { VueFlow as Flow, Panel } from '@vue-flow/core';


// Additional packages
export { Background } from '@vue-flow/background';
export { Controls } from '@vue-flow/controls';


// Re-export all types
export type * from '@vue-flow/core';
```

Then configure your magic imports:

mitosis.config.js

```javascript
magicImportsPlugin({
  '@myapp/flow': {
    defaultPackage: 'reactflow',
    mapping: {
      react: 'reactflow',
      svelte: '@xyflow/svelte',
      vue: '../adapters/flow-shim'  // Points to your shim!
    }
  }
})
```

**Result:**

* React components import from `reactflow`
* Svelte components import from `@xyflow/svelte`
* Vue components import from `../adapters/flow-shim` (your unified shim)

## Supported Targets

[Section titled ‚ÄúSupported Targets‚Äù](#supported-targets)

The plugin works with any Mitosis target:

* `react`
* `vue`
* `svelte`
* `angular`
* `solid`
* `qwik`
* And any future targets!

## Best Practices

[Section titled ‚ÄúBest Practices‚Äù](#best-practices)

### 1. Keep target-specific files minimal

[Section titled ‚Äú1. Keep target-specific files minimal‚Äù](#1-keep-target-specific-files-minimal)

Target-specific files indicate framework differences. Try to minimize them:

```typescript
// ‚úÖ Good: Unavoidable framework difference
src/adapters/flow-shim.vue.ts


// ‚ùå Bad: Logic that should be in Mitosis
src/utils/formatting.react.ts
```

### 2. Document why files are target-specific

[Section titled ‚Äú2. Document why files are target-specific‚Äù](#2-document-why-files-are-target-specific)

src/adapters/flow-shim.vue.ts

```typescript
/**
 * Vue Flow Unified Shim
 *
 * Why this exists:
 * - Vue Flow splits components across @vue-flow/core, @vue-flow/background, etc.
 * - React Flow provides everything from a single 'reactflow' package
 * - This shim unifies the imports for Vue to match React's interface
 */
```

### 3. Use TypeScript

[Section titled ‚Äú3. Use TypeScript‚Äù](#3-use-typescript)

Target-specific files should be `.ts` or `.tsx` to benefit from type checking:

```typescript
// ‚úÖ Good
flow-shim.vue.ts


// ‚ùå Avoid
flow-shim.vue.js
```

## Troubleshooting

[Section titled ‚ÄúTroubleshooting‚Äù](#troubleshooting)

### Files not being processed

[Section titled ‚ÄúFiles not being processed‚Äù](#files-not-being-processed)

**Check:**

1. Plugin is registered in `mitosis.config.js`
2. `allTargets` includes all your targets
3. Filename matches `*.[target].*` pattern exactly

```javascript
// Enable debug mode to see what's happening:
targetFilesPlugin({
  allTargets: ['react', 'vue', 'svelte'],
  debug: true
})
```

### Import errors in generated code

[Section titled ‚ÄúImport errors in generated code‚Äù](#import-errors-in-generated-code)

**Check:**

1. Stripped filename matches your imports
2. Magic imports point to correct path

flow-shim.vue.ts

```typescript
// Output: flow-shim.ts
// Import: '../adapters/flow-shim' ‚úÖ


// NOT: '../adapters/flow-shim.vue' ‚ùå
```

## Related Plugins

[Section titled ‚ÄúRelated Plugins‚Äù](#related-plugins)

* **[Index Generator](/plugins/index-generator/)** - Generates index files for cleaner imports
* **[Story Generator](/plugins/story-generator/)** - Automatically generates Storybook stories for your components
* **[Rich Types](/plugins/rich-types/)** - Adds TypeScript type hints to generated code
* **[CSS Modules](/plugins/css-modules/)** - Injects CSS modules into component styles

## License

[Section titled ‚ÄúLicense‚Äù](#license)

MIT